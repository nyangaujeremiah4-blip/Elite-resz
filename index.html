<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MBSS | Mwananchi Business Support System</title>
<meta name="description" content="Empowering Kenyan MSMEs through digital business tools">

<!-- FontAwesome for icons -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<!-- Styles -->
<style>
*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --primary:#0f9d58;
  --secondary:#4285f4;
  --danger:#ea4335;
  --dark:#121212;
  --light:#f5f5f5;
  --card:#ffffff;
  --radius:14px;
  --shadow:0 10px 30px rgba(0,0,0,.12);
  --transition:.35s ease;
}
body{
  font-family:Inter,Segoe UI,Tahoma,sans-serif;
  background:var(--light);
  color:#333;
  transition:var(--transition);
}
body.dark{background:var(--dark); color:#eee;}
.hidden{display:none; opacity:0; pointer-events:none; transition:opacity 0.5s ease;}
.visible{display:block; opacity:1; pointer-events:auto; transition:opacity 0.5s ease;}
.container{max-width:1200px;margin:auto;padding:20px;}
button{
  border:none; padding:12px 18px; border-radius:10px; font-weight:600;
  cursor:pointer; transition:var(--transition);
}
button.primary{background:var(--primary);color:#fff;}
button.secondary{background:var(--secondary);color:#fff;}
button:hover{transform:translateY(-2px);}
input{
  width:100%; padding:12px; margin:10px 0; border-radius:10px; border:1px solid #ccc;
}
body.dark input{background:#222;color:#fff;border-color:#444;}
.card{
  background:var(--card); padding:30px; border-radius:var(--radius);
  box-shadow:var(--shadow); transition:var(--transition);
}
body.dark .card{background:#1e1e1e;}
header{
  display:flex; justify-content:space-between; align-items:center;
  padding:15px 20px;
  background:linear-gradient(135deg,var(--primary),#0c7c45);
  color:#fff;
}
nav button{margin-left:10px;}
.grid{
  display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:20px;
}
footer{text-align:center; padding:30px; opacity:.7; font-size:.9em;}

/* Animations */
@keyframes fadeIn {from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);}}
@keyframes slideUp {from{opacity:0; transform:translateY(50px);} to{opacity:1; transform:translateY(0);}}
</style>
</head>
<body>

<header>
  <h2>MBSS</h2>
  <nav>
    <button onclick="showSection('login')" class="secondary">Login</button>
    <button onclick="showSection('register')" class="secondary">Register</button>
    <button onclick="toggleTheme()">ðŸŒ™</button>
  </nav>
</header>

<div class="container">

<!-- INTRO -->
<section id="intro" class="card visible" style="padding:60px 40px; text-align:center;">
  <h1 style="font-size:3em; margin-bottom:20px; background:linear-gradient(135deg,var(--primary),var(--secondary)); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">
    Empowering Kenyan MSMEs ðŸ‡°ðŸ‡ª
  </h1>
  <p style="font-size:1.3em; line-height:1.8; max-width:900px; margin:auto; opacity:0.85; margin-bottom:40px;">
    Mwananchi Business Support System is your trusted partner in building a thriving business. Access digital tools, find funding opportunities, showcase your products or services on our marketplace, connect with mentors, and grow your business sustainably. Whether you are a small artisan, a local retailer, or a service provider, MBSS brings all the resources you need under one roof.
  </p>

  <div class="grid" style="max-width:1000px; margin:auto; gap:30px;">
    <div class="card" style="padding:30px; font-size:1.1em; display:flex; flex-direction:column; align-items:center; animation:fadeIn 0.8s ease;">
      <i class="fas fa-chart-line" style="font-size:2.5em; color:var(--primary); margin-bottom:15px;"></i>
      Business Analytics
    </div>
    <div class="card" style="padding:30px; font-size:1.1em; display:flex; flex-direction:column; align-items:center; animation:fadeIn 0.8s ease 0.2s;">
      <i class="fas fa-hand-holding-usd" style="font-size:2.5em; color:var(--secondary); margin-bottom:15px;"></i>
      Funding Opportunities
    </div>
    <div class="card" style="padding:30px; font-size:1.1em; display:flex; flex-direction:column; align-items:center; animation:fadeIn 0.8s ease 0.4s;">
      <i class="fas fa-store" style="font-size:2.5em; color:#ffa500; margin-bottom:15px;"></i>
      Marketplace
    </div>
    <div class="card" style="padding:30px; font-size:1.1em; display:flex; flex-direction:column; align-items:center; animation:fadeIn 0.8s ease 0.6s;">
      <i class="fas fa-graduation-cap" style="font-size:2.5em; color:#ff4081; margin-bottom:15px;"></i>
      Training & Mentorship
    </div>
  </div>

  <br><br>
  <button class="primary" onclick="showSection('register')" style="padding:15px 30px; font-size:1.2em; animation:slideUp 1s ease;">
    Get Started
  </button>
</section>

<!-- LOGIN -->
<section id="login" class="card hidden">
  <h2>Login</h2>
  <input id="loginEmail" placeholder="Email">
  <input id="loginPassword" type="password" placeholder="Password">
  <button class="primary" onclick="login()">Login</button>
</section>

<!-- REGISTER -->
<section id="register" class="card hidden">
  <h2>Create Account</h2>
  <input id="regEmail" placeholder="Email">
  <input id="regPassword" type="password" placeholder="Password">
  <button class="primary" onclick="register()">Register</button>
</section>

<!-- DASHBOARD -->
<section id="dashboard" class="card hidden">
  <h2>Dashboard</h2>
  <div class="grid">
    <div class="card">ðŸ“Š Business Analytics</div>
    <div class="card">ðŸ’° Funding Opportunities</div>
    <div class="card">ðŸ›’ Marketplace</div>
    <div class="card">ðŸ“š Training & Mentorship</div>
  </div>
</section>

</div>

<footer>
Â© 2026 Mwananchi Business Support System
</footer>

<script>
// Section transition with smooth fade
function showSection(id){
  document.querySelectorAll('section').forEach(s=>{
    s.classList.remove('visible'); s.classList.add('hidden');
  });
  const target = document.getElementById(id);
  target.classList.remove('hidden');
  setTimeout(()=>{ target.classList.add('visible'); }, 20);
}

// Dark mode toggle
function toggleTheme(){ document.body.classList.toggle('dark'); }

// ----------------------
// API CALLS
// ----------------------
// Make sure your /api/login and /api/register exist on Vercel and handle Supabase

async function register(){
  try{
    const res = await fetch('/api/register',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        email:regEmail.value,
        password:regPassword.value
      })
    });
    const data = await res.json();
    if(data.success){ showSection('dashboard'); }
    else alert(data.error || 'Registration failed');
  } catch(e){ alert('Something went wrong'); console.error(e); }
}

async function login(){
  try{
    const res = await fetch('/api/login',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        email:loginEmail.value,
        password:loginPassword.value
      })
    });
    const data = await res.json();
    if(data.user){ showSection('dashboard'); }
    else alert(data.error || 'Login failed');
  } catch(e){ alert('Something went wrong'); console.error(e); }
}
</script>

</body>
</html>
