<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - MBSS</title>

<!-- Favicon -->
<link rel="icon" href="https://img.icons8.com/color/48/000000/business.png" type="image/png">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Roboto', sans-serif; }
  body { background:#f5f5f5; color:#333; min-height:100vh; }
  body.dark { background:#111; color:#fff; }

  header {
    background: linear-gradient(135deg, #0f9d58, #4285f4);
    padding: 15px 20px;
    color:#fff;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  header h1 { font-size:1.5em; display:flex; align-items:center; gap:10px; }
  header h1 i { font-size:1.2em; }

  .theme-switcher {
    cursor:pointer;
    border:2px solid #fff;
    padding:5px 10px;
    border-radius:25px;
    font-weight:600;
    transition:0.3s;
  }

  .theme-switcher:hover { background:#fff; color:#0f9d58; }

  main { padding:20px; max-width:1200px; margin:auto; }

  .stats-grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:20px;
    margin-bottom:30px;
  }

  .stat-card {
    background:#fff;
    padding:20px;
    border-radius:15px;
    text-align:center;
    box-shadow:0 6px 18px rgba(0,0,0,0.1);
    transition:0.3s;
    position:relative;
    overflow:hidden;
  }

  .stat-card:hover { transform:translateY(-5px); box-shadow:0 10px 25px rgba(0,0,0,0.2); }

  .stat-card i { font-size:2.5em; margin-bottom:10px; color:#0f9d58; }

  .stat-card h3 { font-size:1.2em; margin-bottom:5px; font-weight:700; }
  .stat-card p { font-size:1.5em; font-weight:700; }

  body.dark .stat-card { background:#222; color:#0ff; }
  body.dark .stat-card i { color:#0ff; }

  /* Products grid */
  .product-grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
    gap:20px;
  }

  .product-card {
    background:#fff;
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 6px 15px rgba(0,0,0,0.1);
    transition:0.3s;
    display:flex;
    flex-direction:column;
  }

  .product-card:hover { transform:translateY(-5px); box-shadow:0 10px 25px rgba(0,0,0,0.2); }

  .product-image {
    background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    color:#fff;
    height:180px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:3em;
  }

  .product-info { padding:15px; flex:1; display:flex; flex-direction:column; }
  .product-info h4 { margin-bottom:8px; }
  .product-info p { flex:1; font-size:0.9em; margin-bottom:10px; color:#666; }
  .product-info .price { font-weight:700; color:#0f9d58; margin-bottom:10px; }
  .product-info button { padding:10px; border:none; border-radius:8px; background:#0f9d58; color:#fff; cursor:pointer; transition:0.3s; }
  .product-info button:hover { background:#4285f4; }

  body.dark .product-card { background:#222; color:#0ff; }
  body.dark .product-info p { color:#7dd7e8; }
  body.dark .product-info .price { color:#0ff; }
  body.dark .product-info button { background:#0ff; color:#111; }
  body.dark .product-info button:hover { background:#4285f4; color:#fff; }

  @media(max-width:768px){
    header { flex-direction:column; gap:10px; }
    .stats-grid, .product-grid { grid-template-columns:1fr; }
  }

</style>
</head>
<body class="light">

<header>
  <h1><i class="fas fa-tachometer-alt"></i> Dashboard</h1>
  <div>
    <span class="theme-switcher" onclick="toggleTheme()">Toggle Theme</span>
  </div>
</header>

<main>

  <!-- Stats cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <i class="fas fa-box"></i>
      <h3>Total Products</h3>
      <p id="total-products">0</p>
    </div>
    <div class="stat-card">
      <i class="fas fa-shopping-cart"></i>
      <h3>Total Orders</h3>
      <p id="total-orders">0</p>
    </div>
    <div class="stat-card">
      <i class="fas fa-users"></i>
      <h3>Total Users</h3>
      <p id="total-users">0</p>
    </div>
    <div class="stat-card">
      <i class="fas fa-money-bill-wave"></i>
      <h3>Total Revenue</h3>
      <p id="total-revenue">KES 0</p>
    </div>
  </div>

  <!-- Product listing -->
  <h2>Products</h2>
  <div class="product-grid" id="product-container">
    <!-- JS will populate products here -->
  </div>

</main>

<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabaseUrl = 'YOUR_SUPABASE_URL';
  const supabaseAnonKey = 'YOUR_SUPABASE_ANON_KEY';
  const supabase = createClient(supabaseUrl, supabaseAnonKey);

  async function loadDashboard() {
    // Fetch total products
    const { data: products } = await supabase.from('products').select('*');
    document.getElementById('total-products').textContent = products.length;

    // Fetch total orders
    const { data: orders } = await supabase.from('orders').select('*');
    document.getElementById('total-orders').textContent = orders.length;

    // Fetch total users
    const { data: users } = await supabase.from('users').select('*');
    document.getElementById('total-users').textContent = users.length;

    // Calculate revenue
    let revenue = 0;
    orders.forEach(o => { revenue += parseFloat(o.total_price) || 0; });
    document.getElementById('total-revenue').textContent = `KES ${revenue}`;

    // Populate products
    const container = document.getElementById('product-container');
    container.innerHTML = '';
    products.forEach(p => {
      container.innerHTML += `
        <div class="product-card">
          <div class="product-image"><i class="fas fa-box"></i></div>
          <div class="product-info">
            <h4>${p.name}</h4>
            <p>${p.description}</p>
            <div class="price">KES ${p.price}</div>
            <button>Add to Cart</button>
          </div>
        </div>
      `;
    });
  }

  loadDashboard();

  // Theme toggle
  function toggleTheme() {
    document.body.classList.toggle('dark');
  }
</script>

</body>
</html>
